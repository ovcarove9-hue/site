<!-- templates/admin/moderation_dashboard.html -->
{% extends "admin/base_site.html" %}

{% block content %}
<div class="container-fluid">
    <h1 class="mb-4">üìä –ü–∞–Ω–µ–ª—å –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –≤–æ–ª–µ–π–±–æ–ª—å–Ω—ã—Ö –ø–ª–æ—â–∞–¥–æ–∫</h1>
    
    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="row mb-4">
        <div class="col-md-3">
            <div class="card text-white bg-primary">
                <div class="card-body">
                    <h5 class="card-title">–í—Å–µ–≥–æ –ø–ª–æ—â–∞–¥–æ–∫</h5>
                    <h2 class="card-text">{{ stats.total }}</h2>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-white bg-warning">
                <div class="card-body">
                    <h5 class="card-title">–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</h5>
                    <h2 class="card-text">{{ stats.pending }}</h2>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-white bg-success">
                <div class="card-body">
                    <h5 class="card-title">–û–¥–æ–±—Ä–µ–Ω–æ</h5>
                    <h2 class="card-text">{{ stats.approved }}</h2>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-white bg-danger">
                <div class="card-body">
                    <h5 class="card-title">–û—Ç–∫–ª–æ–Ω–µ–Ω–æ</h5>
                    <h2 class="card-text">{{ stats.rejected }}</h2>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
    <div class="card mb-4">
        <div class="card-header">
            <h5>‚ö° –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h5>
        </div>
        <div class="card-body">
            <a href="{% url 'admin:myapp_volleyballcourt_changelist' %}?status__exact=pending" 
               class="btn btn-warning me-2">
                <i class="fas fa-clock"></i> –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–ª–æ—â–∞–¥–∫–∏ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
            </a>
            <a href="{% url 'admin:myapp_volleyballcourt_add' %}" class="btn btn-primary me-2">
                <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –ø–ª–æ—â–∞–¥–∫—É –≤—Ä—É—á–Ω—É—é
            </a>
            <a href="{% url 'admin:auth_user_changelist' %}" class="btn btn-info">
                <i class="fas fa-users"></i> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
            </a>
        </div>
    </div>
    
    <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è -->
    <div class="card">
        <div class="card-header">
            <h5>üÜï –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</h5>
        </div>
        <div class="card-body">
            {% if recent_courts %}
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                            <th>–ì–æ—Ä–æ–¥</th>
                            <th>–ü—Ä–µ–¥–ª–æ–∂–∏–ª</th>
                            <th>–î–∞—Ç–∞</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for court in recent_courts %}
                        <tr>
                            <td>
                                <strong>{{ court.name }}</strong>
                                <br>
                                <small class="text-muted">{{ court.address|truncatechars:30 }}</small>
                            </td>
                            <td>{{ court.city }}</td>
                            <td>
                                {% if court.suggested_by %}
                                {{ court.suggested_by.username }}
                                <br>
                                <small>{{ court.suggested_by.email }}</small>
                                {% else %}
                                <em>–ù–µ —É–∫–∞–∑–∞–Ω</em>
                                {% endif %}
                            </td>
                            <td>{{ court.created_at|date:"d.m.Y H:i" }}</td>
                            <td>
                                <a href="{% url 'admin:myapp_volleyballcourt_change' court.id %}" 
                                   class="btn btn-sm btn-outline-primary">
                                    <i class="fas fa-edit"></i>
                                </a>
                                <a href="{% url 'admin:approve_court' court.id %}" 
                                   class="btn btn-sm btn-outline-success">
                                    <i class="fas fa-check"></i>
                                </a>
                                <a href="{% url 'admin:reject_court' court.id %}" 
                                   class="btn btn-sm btn-outline-danger">
                                    <i class="fas fa-times"></i>
                                </a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <p class="text-muted text-center py-4">–ù–µ—Ç –ø–ª–æ—â–∞–¥–æ–∫, –æ–∂–∏–¥–∞—é—â–∏—Ö –º–æ–¥–µ—Ä–∞—Ü–∏–∏ üéâ</p>
            {% endif %}
        </div>
    </div>
    
    <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤ -->
    <div class="card mt-4">
        <div class="card-header">
            <h5>üìã –ü—Ä–∞–≤–∏–ª–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</h5>
        </div>
        <div class="card-body">
            <ul>
                <li>‚úÖ <strong>–û–¥–æ–±—Ä—è–π—Ç–µ</strong> –ø–ª–æ—â–∞–¥–∫–∏ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –∏ —Ñ–æ—Ç–æ</li>
                <li>‚ùå <strong>–û—Ç–∫–ª–æ–Ω—è–π—Ç–µ</strong> –ø–ª–æ—â–∞–¥–∫–∏ —Å —Ñ–µ–π–∫–æ–≤—ã–º–∏ –∏–ª–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏</li>
                <li>‚ùì <strong>–ó–∞–ø—Ä–∞—à–∏–≤–∞–π—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é</strong>, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ</li>
                <li>üìß <strong>–£–≤–µ–¥–æ–º–ª—è–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</strong> –æ —Ä–µ—à–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</li>
                <li>üîç <strong>–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –¥—É–±–ª–∏–∫–∞—Ç—ã</strong> –ø–µ—Ä–µ–¥ –æ–¥–æ–±—Ä–µ–Ω–∏–µ–º</li>
            </ul>
        </div>
    </div>
</div>

<style>
.card {
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.card-header {
    background-color: #f8f9fa;
    border-bottom: 1px solid #e9ecef;
}

.table th {
    border-top: none;
}

.btn-sm {
    padding: 0.25rem 0.5rem;
    margin: 0 2px;
}
</style>
{% endblock %}